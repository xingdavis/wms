<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xs.wms.dao.IFee">
	<resultMap id="BaseResultMap" type="com.xs.wms.pojo.Fee">
		<id column="id" property="id" jdbcType="INTEGER" />
		<result column="bill_id" property="billId" jdbcType="INTEGER" />
		<result column="bill_code" property="billCode" jdbcType="VARCHAR" />
		<result column="client_id" property="clientId" jdbcType="INTEGER" />
		<result column="ftype" property="ftype" jdbcType="SMALLINT" />
		<result column="fname" property="fname" jdbcType="VARCHAR" />
		<result column="price" property="price" jdbcType="DOUBLE" />
		<result column="amount" property="amount" jdbcType="DOUBLE" />
		<result column="sdate" property="sdate" jdbcType="TIMESTAMP" />
		<result column="edate" property="edate" jdbcType="TIMESTAMP" />
		<result column="memo" property="memo" jdbcType="VARCHAR" />
		<result column="flag" property="flag" jdbcType="SMALLINT" />
		<result column="op" property="op" jdbcType="INTEGER" />
		<result column="cr_date" property="crDate" jdbcType="TIMESTAMP" />
	</resultMap>
	<resultMap id="BaseResultMap1" type="com.xs.wms.pojo.Fee">
		<id column="id" property="id" jdbcType="INTEGER" />
		<result column="bill_id" property="billId" jdbcType="INTEGER" />
		<result column="bill_code" property="billCode" jdbcType="VARCHAR" />
		<result column="ftype" property="ftype" jdbcType="SMALLINT" />
		<result column="fname" property="fname" jdbcType="VARCHAR" />
		<result column="price" property="price" jdbcType="DOUBLE" />
		<result column="amount" property="amount" jdbcType="DOUBLE" />
		<result column="sdate" property="sdate" jdbcType="TIMESTAMP" />
		<result column="edate" property="edate" jdbcType="TIMESTAMP" />
		<result column="memo" property="memo" jdbcType="VARCHAR" />
		<result column="flag" property="flag" jdbcType="SMALLINT" />
		<result column="op" property="op" jdbcType="INTEGER" />
		<result column="cr_date" property="crDate" jdbcType="TIMESTAMP" />
		<association property="client" column="client_id"
			javaType="com.xs.wms.pojo.Client">
			<id property="id" column="id" />
			<result column="cname" property="cname" jdbcType="VARCHAR" />
		</association>
	</resultMap>
	<sql id="Base_Column_List">
		id, bill_id billId, bill_code billCode, client_id clientId, ftype,
		fname, price,
		amount, sdate, edate, memo,
		flag,op,cr_date crDate
	</sql>
	<sql id="Base_Column_List1">
		f.id, f.bill_id billId, f.bill_code billCode, f.client_id clientId, f.ftype,
		f.fname, f.price,
		f.amount, f.sdate, f.edate, f.memo,
		f.flag,f.op,f.cr_date crDate,c.cname
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		select
		<include refid="Base_Column_List" />
		from t_fee
		where id = #{id,jdbcType=INTEGER}
	</select>
	<select id="getDatagridTotal" resultType="long">
		select
		count(1)
		from t_fee f,t_client c where f.client_id=c.id
		<if test="client!=null and client != ''">
			f.client_id=#{client}
		</if>
		<if test="key!=null and key!=''">
			and (f.bill_code like concat('%',#{key},'%') or c.cname
			like concat('%',#{key},'%') or
			f.fname like
			concat('%',#{key},'%'))
		</if>
		<if test="sdate!=null and sdate != '' and edate!=null and edate != ''">
			and f.edate BETWEEN #{sdate} and #{edate}
		</if>
	</select>
	<select id="datagrid" resultType="com.xs.wms.pojo.Fee">
		select
		<include refid="Base_Column_List1" />
		from t_fee f,t_client c where f.client_id=c.id

		<if test="client!=null and client != ''">
			f.client_id=#{client}
		</if>
		<if test="key!=null and key!=''">
			and (f.bill_code like concat('%',#{key},'%') or c.cname
			like concat('%',#{key},'%') or
			f.fname like
			concat('%',#{key},'%'))
		</if>
		<if test="sdate!=null and sdate != '' and edate!=null and edate != ''">
			and f.edate BETWEEN #{sdate} and #{edate}
		</if>
		<if test="page.sort != null and page.sort != ''">
			order by #{page.sort} #{page.order}
		</if>
		<if test="page.page > 0">
			limit #{page.start},#{page.end}
		</if>
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		delete from t_fee
		where id = #{id,jdbcType=INTEGER} and flag=0
	</delete>
	<select id="repeatNum" resultType="java.lang.Integer">
		select count(1) from
		t_fee
		where fname = #{fname,jdbcType=VARCHAR} and
		bill_id=#{billId,jdbcType=INTEGER} and
		client_id=#{clientId,jdbcType=INTEGER}
	</select>
	<insert id="insert" parameterType="com.xs.wms.pojo.Fee">
		insert into t_fee (id,
		bill_id, bill_code, client_id,
		ftype, fname, price,
		amount, sdate,
		edate,
		memo,flag,op,cr_date)
		values (#{id,jdbcType=INTEGER},
		#{billId,jdbcType=INTEGER},#{billCode,jdbcType=VARCHAR},
		#{clientId,jdbcType=INTEGER},
		#{ftype,jdbcType=SMALLINT},
		#{fname,jdbcType=VARCHAR}, #{price,jdbcType=DOUBLE},
		#{amount,jdbcType=DOUBLE}, #{sdate,jdbcType=TIMESTAMP},
		#{edate,jdbcType=TIMESTAMP},
		#{memo,jdbcType=VARCHAR},
		0,#{op,jdbcType=INTEGER},now())
	</insert>
	<insert id="insertSelective" parameterType="com.xs.wms.pojo.Fee">
		insert into t_fee
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="billId != null">
				bill_id,
			</if>
			<if test="billCode != null">
				bill_code,
			</if>
			<if test="clientId != null">
				client_id,
			</if>
			<if test="ftype != null">
				ftype,
			</if>
			<if test="fname != null">
				fname,
			</if>
			<if test="price != null">
				price,
			</if>
			<if test="amount != null">
				amount,
			</if>
			<if test="sdate != null">
				sdate,
			</if>
			<if test="edate != null">
				edate,
			</if>
			<if test="memo != null">
				memo,
			</if>
			<if test="flag != null">
				flag,
			</if>
			<if test="op != null">
				op,
			</if>
			<if test="crDate != null">
				cr_date,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="billId != null">
				#{billId,jdbcType=INTEGER},
			</if>
			<if test="billCode != null">
				#{billCode,jdbcType=VARCHAR},
			</if>
			<if test="clientId != null">
				#{clientId,jdbcType=INTEGER},
			</if>
			<if test="ftype != null">
				#{ftype,jdbcType=SMALLINT},
			</if>
			<if test="fname != null">
				#{fname,jdbcType=VARCHAR},
			</if>
			<if test="price != null">
				#{price,jdbcType=DOUBLE},
			</if>
			<if test="amount != null">
				#{amount,jdbcType=DOUBLE},
			</if>
			<if test="sdate != null">
				#{sdate,jdbcType=TIMESTAMP},
			</if>
			<if test="edate != null">
				#{edate,jdbcType=TIMESTAMP},
			</if>
			<if test="memo != null">
				#{memo,jdbcType=VARCHAR},
			</if>
			<if test="flag != null">
				#{flag,jdbcType=SMALLINT},
			</if>
			<if test="op != null">
				#{op,jdbcType=INTEGER},
			</if>
			<if test="crDate != null">
				#{crDate,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.xs.wms.pojo.Fee">
		update t_fee
		<set>
			<if test="billId != null">
				bill_id = #{billId,jdbcType=INTEGER},
			</if>
			<if test="billCode != null">
				bill_code = #{billCode,jdbcType=VARCHAR},
			</if>
			<if test="clientId != null">
				client_id = #{clientId,jdbcType=INTEGER},
			</if>
			<if test="ftype != null">
				ftype = #{ftype,jdbcType=SMALLINT},
			</if>
			<if test="fname != null">
				fname = #{fname,jdbcType=VARCHAR},
			</if>
			<if test="price != null">
				price = #{price,jdbcType=DOUBLE},
			</if>
			<if test="amount != null">
				amount = #{amount,jdbcType=DOUBLE},
			</if>
			<if test="sdate != null">
				sdate = #{sdate,jdbcType=TIMESTAMP},
			</if>
			<if test="edate != null">
				edate = #{edate,jdbcType=TIMESTAMP},
			</if>
			<if test="memo != null">
				memo = #{memo,jdbcType=VARCHAR},
			</if>
			<if test="op != null">
				op = #{op,jdbcType=INTEGER},
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.xs.wms.pojo.Fee">
		update t_fee
		set
		bill_id = #{billId,jdbcType=INTEGER},
		bill_code=
		#{billCode,jdbcType=VARCHAR},
		client_id =
		#{clientId,jdbcType=INTEGER},
		ftype = #{ftype,jdbcType=SMALLINT},
		fname
		= #{fname,jdbcType=VARCHAR},
		price = #{price,jdbcType=DOUBLE},
		amount =
		#{amount,jdbcType=DOUBLE},
		sdate = #{sdate,jdbcType=TIMESTAMP},
		edate =
		#{edate,jdbcType=TIMESTAMP},
		memo = #{memo,jdbcType=VARCHAR},
		op=#{op,jdbcType=INTEGER}
		where id = #{id,jdbcType=INTEGER}
	</update>
</mapper>